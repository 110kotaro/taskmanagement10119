# タスク管理アプリ 仕様書

## 1. 概要

本アプリケーションは、Angular 18とFirebaseを使用した包括的なタスク管理システムです。個人タスク、チームタスク、プロジェクト管理、作業時間計測、通知機能などを提供します。

### 技術スタック
- **フロントエンド**: Angular 18 (Standalone Components)
- **バックエンド**: Firebase (Authentication, Firestore, Cloud Functions)
- **言語**: TypeScript
- **スタイリング**: CSS Variables (テーマ対応)

---

## 2. 認証・ユーザー管理

### 2.1 ユーザー認証
- Firebase Authenticationによるメール/パスワード認証
- ユーザー登録・ログイン機能
- ログアウト機能
- 認証状態の永続化

### 2.2 ユーザーモデル
```typescript
interface User {
  id: string;
  email: string;
  displayName: string;
  photoURL?: string | null;
  role: UserRole; // 'admin' | 'user'
  theme: 'light' | 'dark';
  notificationSettings: NotificationPreferences;
  fcmToken?: string; // Web Push通知用
  showNextTasks?: boolean; // 次やるタスクの表示設定
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### 2.3 ユーザー権限
- **Admin**: システム管理者（全機能にアクセス可能）
- **User**: 一般ユーザー

---

## 3. タスク管理

### 3.1 タスクモデル
```typescript
interface Task {
  id: string;
  title: string;
  description?: string;
  projectId?: string;
  projectName?: string;
  teamId?: string; // チームID（未設定の場合は個人タスク）
  teamName?: string;
  assigneeId?: string;
  assigneeName?: string;
  creatorId: string;
  creatorName: string;
  status: TaskStatus; // 'not_started' | 'in_progress' | 'completed' | 'overdue'
  startDate: Timestamp;
  endDate: Timestamp;
  completedAt?: Timestamp;
  priority: PriorityLabel; // 'important' | 'normal' | 'low' | 'none' (重要度)
  customPriority?: string;
  taskType: TaskType; // 'normal' | 'meeting' | 'regular' | 'project' | 'other'
  memo?: string;
  subtasks: SubTask[];
  progress: number; // 0-100
  showProgress: boolean;
  progressManual: boolean; // 手動修正中かどうか
  reminders: Reminder[];
  comments: Comment[];
  workSessions: WorkSession[];
  totalWorkTime: number; // 秒
  recurrence: RecurrenceType; // 'none' | 'daily' | 'weekly' | 'biweekly' | 'monthly' | 'yearly'
  recurrenceEndDate?: Timestamp;
  parentTaskId?: string;
  recurrenceInstance?: number;
  isRecurrenceParent?: boolean;
  isDeleted: boolean;
  deletedAt?: Timestamp;
  statusBeforeDeletion?: TaskStatus;
  dateCheckedAt?: Timestamp; // 日付チェック済み日時
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### 3.2 タスクの種類

#### 3.2.1 個人タスク
- `teamId`が未設定のタスク
- 作成者のみが閲覧・編集・削除可能
- 担当者は作成者自身に自動設定される

#### 3.2.2 チームタスク
- `teamId`が設定されているタスク
- チームメンバー全員が閲覧可能
- 編集・削除権限は後述の権限システムに従う

#### 3.2.3 プロジェクトタスク
- `projectId`が設定されているタスク
- プロジェクトメンバー全員が閲覧可能
- 編集・削除権限は後述の権限システムに従う

### 3.3 タスク権限システム

#### 3.3.1 閲覧権限 (`canViewTask`)
以下のいずれかに該当する場合、閲覧可能：
- タスク作成者
- チームタスクの場合：チームメンバー全員
- プロジェクトタスクの場合：プロジェクトメンバー全員、またはチームプロジェクトの場合はチームメンバー全員
- 個人タスクの場合：作成者のみ

#### 3.3.2 編集権限 (`canEditTask`)
以下のいずれかに該当する場合、編集可能：
- タスク作成者
- タスク担当者（チームタスクまたはプロジェクトタスクの場合）
- チーム管理者（チームタスクの場合）
- プロジェクトオーナーまたはプロジェクト担当者（プロジェクトタスクの場合）

#### 3.3.3 削除権限 (`canDeleteTask`)
以下のいずれかに該当する場合、削除可能：
- タスク作成者
- チーム管理者（チームタスクの場合）
- プロジェクトオーナーまたはプロジェクト担当者（プロジェクトタスクの場合）

#### 3.3.4 復元権限 (`canRestoreTask`)
削除権限と同じ

#### 3.3.5 完全削除権限 (`canPermanentlyDeleteTask`)
以下のいずれかに該当する場合、完全削除可能：
- タスク作成者（個人タスクの場合）
- チーム管理者（チームタスクの場合）
- プロジェクトオーナー（プロジェクトタスクの場合）

### 3.4 タスク機能

#### 3.4.1 タスク作成
- タイトル、説明、メモの入力
- ステータス、重要度、タスクタイプの選択
- 開始日・終了日の設定（時間も設定可能）
- 担当者の設定（チームタスクの場合のみ）
- プロジェクトへの紐付け
- 繰り返し設定（毎日、毎週、隔週、毎月、毎年）
- 繰り返し終了日の設定
- リマインダー設定（開始前、期限前、カスタム）
- 進捗率表示の有無設定
- サブタスクの追加（進捗率表示が有効な場合）

#### 3.4.2 タスク編集
- 作成時と同様の全フィールドを編集可能
- タスクタイプの変更も可能
- 繰り返し設定の変更（親タスクのみ）
- リマインダーの追加・変更・削除
- サブタスクの追加・削除・完了状態の変更

#### 3.4.3 タスク削除
- 論理削除（`isDeleted: true`）
- 削除前のステータスを保存（復元時に使用）
- 削除日時を記録
- 完全削除（ゴミ箱から完全に削除）

#### 3.4.4 タスク復元
- ゴミ箱からタスクを復元
- 削除前のステータスを復元

#### 3.4.5 タスク複製
- 既存タスクを複製して新規タスクを作成
- ステータスは「未着手」にリセット
- サブタスクは未完了にリセット
- リマインダーは未送信にリセット
- コメント、作業セッションは複製しない

#### 3.4.6 繰り返しタスク
- 親タスクを作成し、子タスクを自動生成
- 繰り返しタイプ：毎日、毎週、隔週、毎月、毎年
- 繰り返し終了日を設定可能
- 最大生成期間：毎日・毎週（3か月）、隔週（6か月）、毎月（12か月）、毎年（36か月）
- ローリング生成：最初のタスクの終了日が過ぎたら次のタスクを自動生成
- 親タスクの繰り返し設定変更時、既存の子タスクを削除して再生成

### 3.5 タスク表示

#### 3.5.1 ホーム画面
- **今日のタスク**: 開始日または終了日が今日のタスク
- **今週のタスク**: 開始日または終了日が今週のタスク
- カテゴリ別表示（開始日、終了日、その他）
- カテゴリの展開/折りたたみ
- 期間変更機能（今週のタスク表示期間を変更可能）

#### 3.5.2 タスク一覧画面
- リスト表示（テーブル形式）
- カード表示（カンバン形式）
- フィルター機能：
  - ステータス（複数選択可能）：未着手、進行中、完了済み
  - 期限切れ（独立したチェックボックス）
  - 重要度（複数選択可能）：重要、普通、低め、なし
  - タスクタイプ（複数選択可能）：通常、会議、定期、プロジェクト、その他
- ソート機能：
  - 終了日、開始日、作成日、重要度、タイトル、完了日時
  - 昇順/降順の切り替え
- 一括削除機能
- 期限切れタスクの背景色：
  - 開始日が過ぎている：黄色背景
  - 終了日が過ぎている：赤色背景（優先）

#### 3.5.3 タスク詳細画面
- タスクの全情報を表示
- 編集モードへの切り替え
- コメント機能（@メンション対応）
- 作業時間計測機能
- サブタスク管理（進捗率表示が有効な場合）
- 進捗率の手動修正機能

### 3.6 タスクインポート
- Excel/CSVファイルからのタスク一括インポート
- カラムマッピング機能
- プレビュー機能
- エラーチェック機能
- チーム名による個人/チームタスクの自動割り当て

---

## 4. プロジェクト管理

### 4.1 プロジェクトモデル
```typescript
interface Project {
  id: string;
  name: string;
  description?: string;
  ownerId: string;
  ownerName: string;
  assigneeId?: string; // 担当者ID
  assigneeName?: string;
  members: ProjectMember[];
  teamId?: string; // チームID（未設定の場合は個人プロジェクト）
  teamName?: string;
  status: ProjectStatus; // 'not_started' | 'in_progress' | 'completed'
  startDate: Timestamp;
  endDate: Timestamp;
  completionRate: number; // 0-100
  totalTasks: number;
  completedTasks: number;
  isDeleted: boolean;
  deletedAt?: Timestamp;
  statusBeforeDeletion?: ProjectStatus;
  dateCheckedAt?: Timestamp;
  originalTaskIds?: string[]; // 削除時に配下にあったタスクのID
  comments?: Comment[];
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### 4.2 プロジェクトの種類

#### 4.2.1 個人プロジェクト
- `teamId`が未設定のプロジェクト
- 作成者のみが閲覧・編集・削除可能

#### 4.2.2 チームプロジェクト
- `teamId`が設定されているプロジェクト
- チームメンバー全員が閲覧可能
- 編集・削除権限は後述の権限システムに従う

### 4.3 プロジェクト権限システム

#### 4.3.1 閲覧権限 (`canViewProject`)
以下のいずれかに該当する場合、閲覧可能：
- プロジェクトオーナー
- プロジェクトメンバー
- チームプロジェクトの場合：チームメンバー全員
- **個人モードの場合**：
  - プロジェクトの担当者（担当者がいない場合は作成者）
  - プロジェクト内に自分が担当しているタスクがある場合（タスクに担当者がいない場合は作成者）

#### 4.3.2 編集権限 (`canEditProject`)
以下のいずれかに該当する場合、編集可能：
- プロジェクトオーナー
- プロジェクト担当者（`assigneeId`）
- チーム管理者（チームプロジェクトの場合）

#### 4.3.3 メンバー管理権限 (`canManageMembers`)
以下のいずれかに該当する場合、メンバー管理可能：
- プロジェクトオーナー
- チーム管理者（チームプロジェクトの場合）

### 4.4 プロジェクト機能

#### 4.4.1 プロジェクト作成
- 名前、説明の入力
- 開始日・終了日の設定
- チームへの紐付け（オプション）
- 担当者の設定（オプション）

#### 4.4.2 プロジェクト編集
- 名前、説明、開始日・終了日の変更
- 担当者の変更
- ステータスの変更

#### 4.4.3 メンバー管理
- メンバーの追加（メールアドレスで招待）
- メンバーの削除
- メンバー削除時、そのメンバーが担当しているタスクを未割り当てに変更

#### 4.4.4 完了率の自動計算
- プロジェクトに紐づくタスクの完了率を自動計算
- タスクの追加・削除・ステータス変更時に自動更新
- 完了率100%時に通知を送信

#### 4.4.5 プロジェクト削除・復元
- 論理削除（`isDeleted: true`）
- 削除時に配下のタスクIDを保存（復元時に使用）
- 完全削除機能

### 4.5 プロジェクト表示

#### 4.5.1 プロジェクト一覧画面
- プロジェクトの一覧表示
- プロジェクト作成ボタン
- プロジェクト詳細へのリンク

#### 4.5.2 プロジェクト詳細画面
- プロジェクトの全情報を表示
- メンバー一覧表示
- プロジェクトに紐づくタスク一覧
- コメント機能（@メンション対応）
- 編集モードへの切り替え

---

## 5. チーム管理

### 5.1 チームモデル
```typescript
interface Team {
  id: string;
  name: string;
  description?: string;
  ownerId: string;
  ownerName: string;
  members: TeamMember[];
  createdAt: Timestamp;
  updatedAt: Timestamp;
  isDeleted: boolean;
  deletedAt?: Timestamp;
}
```

### 5.2 チームメンバーの役割

#### 5.2.1 オーナー (`owner`)
- チーム作成者
- 全権限を持つ
- チームの削除が可能
- メンバーの追加・削除・権限変更が可能

#### 5.2.2 管理者 (`admin`)
- メンバーの追加・削除・権限変更が可能
- チームタスク・プロジェクトの全操作が可能
- チームの削除は不可

#### 5.2.3 メンバー (`member`)
- チームタスク・プロジェクトの閲覧・編集が可能
- メンバー管理は不可

#### 5.2.4 閲覧者 (`viewer`)
- チームタスク・プロジェクトの閲覧のみ可能
- 編集・削除は不可

### 5.3 チーム機能

#### 5.3.1 チーム作成
- チーム名、説明の入力
- 作成者が自動的にオーナーとして追加される

#### 5.3.2 メンバー招待
- **メール招待**: メールアドレスを指定して招待
- **リンク招待**: 招待リンクを生成して共有
- 招待状態の管理（pending, accepted, rejected）

#### 5.3.3 メンバー管理
- メンバーの削除
- メンバーの権限変更
- メンバー削除時：
  - そのメンバーを関連プロジェクトからも削除
  - そのメンバーが担当しているタスク・プロジェクトを未割り当てに変更

#### 5.3.4 チーム退会
- メンバーが自らチームを退会
- 退会時、そのメンバーを関連プロジェクトからも削除
- そのメンバーが担当しているタスク・プロジェクトを未割り当てに変更

#### 5.3.5 チーム削除
- オーナーのみが削除可能
- 論理削除（`isDeleted: true`）

### 5.4 チーム表示

#### 5.4.1 チーム一覧画面
- ユーザーが所属しているチーム一覧
- チーム作成ボタン
- チーム詳細へのリンク

#### 5.4.2 チーム詳細画面
- チームの全情報を表示
- メンバー一覧表示
- 招待中のメンバー一覧表示
- メンバーの追加・削除・権限変更機能
- チーム削除機能（オーナーのみ）

---

## 6. 表示モード

### 6.1 個人モード
- **タスク表示**：
  - 個人タスク（自分が作成したタスク）
  - チームタスクで、自分が担当しているタスク（担当者がいない場合は作成者）
  - プロジェクトタスクで、プロジェクトが閲覧可能かつ自分が担当しているタスク（担当者がいない場合は作成者）
- **プロジェクト表示**：
  - プロジェクトの担当者（担当者がいない場合は作成者）であるプロジェクト
  - プロジェクト内に自分が担当しているタスクがあるプロジェクト（タスクに担当者がいない場合は作成者）

### 6.2 チームモード
- 選択したチームのタスクを表示
- 選択したチームのプロジェクトを表示
- チームメンバー全員が閲覧可能なタスク・プロジェクトを表示

---

## 7. 日付チェック機能

### 7.1 タスクの日付チェック

#### 7.1.1 開始日チェック
- 未着手タスクで開始日時を過ぎている場合に通知
- 時間が00:00:00の場合は日付のみで判断
- 時間が設定されている場合は時刻も考慮

#### 7.1.2 終了日チェック
- 未着手または進行中タスクで終了日時を過ぎている場合に通知
- 時間が23:59:59の場合は翌日の00:00:00と比較
- 時間が設定されている場合は時刻も考慮

#### 7.1.3 日付チェックの動作
- アプリ起動時（ログイン時）に自動実行
- 1分ごとに定期チェック
- `dateCheckedAt`フィールドで1日1回のみチェック
- チェックが必要なタスクに対して確認モーダルを表示
- 通知を作成（通知設定で有効な場合）

### 7.2 プロジェクトの日付チェック

#### 7.2.1 開始日チェック
- 準備中プロジェクトで開始日時を過ぎている場合、自動的に進行中に変更

#### 7.2.2 終了日チェック
- 未完了プロジェクトで終了日時を過ぎている場合に通知
- 管理者またはプロジェクト担当者のみが確認可能

#### 7.2.3 完了率100%チェック
- 完了率が100%で未完了の場合に通知
- 管理者またはプロジェクト担当者のみが確認可能

---

## 8. リマインダー機能

### 8.1 リマインダータイプ

#### 8.1.1 開始前リマインダー
- タスク開始前の指定時間に通知
- 設定可能な時間：1日前、3時間前、1時間前、30分前、15分前、10分前、5分前、1分前

#### 8.1.2 期限前リマインダー
- タスク期限前の指定時間に通知
- 設定可能な時間：1日前、3時間前、1時間前、30分前、15分前、10分前、5分前、1分前

#### 8.1.3 カスタムリマインダー
- 指定した日時に通知
- 絶対日時で設定

### 8.2 リマインダーの動作
- Cloud Functionsで定期チェック（`checkReminders`）
- リマインダー送信後、`sent: true`に更新
- 通知設定で有効な場合のみ送信

---

## 9. 通知システム

### 9.1 通知タイプ

#### 9.1.1 タスク関連通知
- `TaskCreated`: タスク作成
- `TaskUpdated`: タスク更新（ステータス変更、割り当てなど）
- `TaskDeleted`: タスク削除
- `TaskRestored`: タスク復元
- `TaskCompleted`: タスク完了
- `TaskOverdue`: タスク期限切れ（日付チェック）
- `TaskReminder`: タスクリマインダー

#### 9.1.2 プロジェクト関連通知
- `ProjectCreated`: プロジェクト作成
- `ProjectUpdated`: プロジェクト更新（担当者変更を含む）
- `ProjectDeleted`: プロジェクト削除
- `ProjectRestored`: プロジェクト復元
- `ProjectCompleted`: プロジェクト完了
- `ProjectMemberAdded`: プロジェクトメンバー追加
- `ProjectMemberRemoved`: プロジェクトメンバー削除

#### 9.1.3 チーム関連通知
- `TeamInvitation`: チーム招待
- `TeamInvitationAccepted`: チーム招待承認
- `TeamInvitationRejected`: チーム招待拒否
- `TeamLeave`: チーム退会
- `TeamPermissionChange`: チーム権限変更

### 9.2 通知の送信先

#### 9.2.1 タスク作成通知
- プロジェクトタスクの場合：プロジェクトメンバー全員（作成者を除く）
- チームタスクの場合：チームメンバー全員（作成者を除く）

#### 9.2.2 タスク更新通知
- プロジェクトタスクの場合：プロジェクトメンバー全員（更新者を除く）
- チームタスクの場合：チームメンバー全員（更新者を除く）

#### 9.2.3 タスク削除通知
- プロジェクトタスクの場合：プロジェクトメンバー全員（削除者を除く）
- チームタスクの場合：チームメンバー全員（削除者を除く）

#### 9.2.4 チーム招待通知
- 招待されたユーザーのみ

#### 9.2.5 チーム招待承認通知
- 招待者とチームメンバー全員（承認者を除く）

#### 9.2.6 チーム招待拒否通知
- 招待者のみ

#### 9.2.7 チーム退会通知
- チームメンバー全員（退会者を除く）

#### 9.2.8 チームメンバー削除通知
- 削除されたメンバー（「あなたが削除されました」）
- チームメンバー全員（削除者を除く、「Xが削除されました」）

#### 9.2.9 チーム権限変更通知
- 権限変更されたメンバー
- チームメンバー全員（変更操作者を除く）

### 9.3 通知設定

#### 9.3.1 カテゴリごとの設定
- タスク関連
- プロジェクト関連
- リマインダー
- チーム関連
- 日付チェック

#### 9.3.2 個別通知設定
- 各通知タイプごとに有効/無効を設定可能
- カテゴリ設定と個別設定の両方が有効な場合のみ通知を送信

#### 9.3.3 WebPush通知設定
- カテゴリごとのWebPush通知設定
- 個別通知ごとのWebPush通知設定
- ブラウザの通知許可が必要

### 9.4 通知表示

#### 9.4.1 通知一覧画面
- 未読/既読の表示
- 通知の削除（論理削除）
- 一括削除機能
- ゴミ箱機能（削除済み通知の表示）
- ゴミ箱からの復元・完全削除機能
- 一括復元・一括完全削除機能
- 日付チェック通知のクリックでモーダル表示

---

## 10. コメント機能

### 10.1 タスクコメント
- タスクにコメントを追加
- @メンション機能（プロジェクトタスク：プロジェクトメンバー、チームタスク：チームメンバー、個人タスク：なし）
- メンションされたユーザーに通知を送信
- 自動コメント（ステータス変更、終了日変更、編集など）

### 10.2 プロジェクトコメント
- プロジェクトにコメントを追加
- @メンション機能（プロジェクトメンバーのみ）
- メンションされたユーザーに通知を送信
- 自動コメント（ステータス変更、終了日変更、編集など）

### 10.3 コメントモデル
```typescript
interface Comment {
  id: string;
  userId: string;
  userName: string;
  content: string;
  createdAt: Timestamp;
  updatedAt?: Timestamp;
  mentionedUserIds?: string[]; // メンションされたユーザーIDのリスト
}
```

---

## 11. 作業時間計測

### 11.1 作業セッション
- タスクごとに作業時間を計測
- 開始時間・終了時間の記録
- 休憩時間の記録
- 実働時間の自動計算
- ポモドーロタイマー対応

### 11.2 作業セッション管理
- 作業セッションの追加・編集・削除
- 変更ログの記録（誰がいつ何を変更したか）
- 合計作業時間の表示

### 11.3 作業セッションモデル
```typescript
interface WorkSession {
  id: string;
  startTime: Timestamp;
  endTime?: Timestamp;
  breakDuration: number; // 分
  actualDuration: number; // 秒
  isPomodoro: boolean;
  completedPomodoros?: number;
  changeLogs?: WorkSessionChangeLog[];
}
```

---

## 12. ガントチャート

### 12.1 表示機能
- タスクとプロジェクトを時系列で表示
- 日付範囲の自動調整
- タスク・プロジェクトのツールチップ表示（詳細情報）
- チーム名の表示（タスク・プロジェクトのツールチップ）

### 12.2 フィルター機能
- ステータスフィルター（複数選択可能）：未着手、進行中、完了済み
- 期限切れフィルター（独立したチェックボックス）
- 重要度フィルター（複数選択可能）
- タスクタイプフィルター（複数選択可能）

### 12.3 ソート機能
- 終了日、開始日、作成日、重要度、タイトル
- 昇順/降順の切り替え

### 12.4 表示モード
- タスク表示モード
- プロジェクト表示モード

---

## 13. 統計機能

### 13.1 作業時間統計
- 日別・週別・月別の作業時間表示
- グラフ表示（Chart.js使用）
- テーマ対応（ダークモード対応）

### 13.2 タスク統計
- タスクの完了数
- タスクのステータス別集計

---

## 14. テーマ設定

### 14.1 テーマモード
- ライトモード
- ダークモード
- システム設定に従う

### 14.2 テーマ適用範囲
- 全ページ・コンポーネントに適用
- CSS Variablesを使用した統一的なテーマ管理
- 日付/時刻ピッカーのアイコンもテーマ対応

---

## 15. アーカイブ機能

### 15.1 ゴミ箱
- 削除されたタスク・プロジェクトの表示
- 復元機能
- 完全削除機能
- 一括復元・一括完全削除機能

---

## 16. その他の機能

### 16.1 次やるタスク候補
- 重要度と期限に基づいて次に取り組むべきタスクを提案
- 自分が担当しているタスク、または自分が作成して担当者がいないタスクを表示
- モーダルで表示
- 設定で表示/非表示を切り替え可能

### 16.2 タイマー機能
- 作業時間計測用のタイマー
- ポモドーロタイマー対応

### 16.3 コメント一覧画面
- 全タスク・プロジェクトのコメントを一覧表示
- フィルター機能

### 16.4 アカウント設定
- ユーザー情報の表示・編集
- プロフィール画像の設定

---

## 17. データベース構造

### 17.1 Firestoreコレクション
- `users`: ユーザー情報
- `tasks`: タスク情報
- `projects`: プロジェクト情報
- `teams`: チーム情報
- `teamInvitations`: チーム招待情報
- `notifications`: 通知情報

### 17.2 インデックス
- 複合インデックスが必要なクエリ：
  - `tasks`: `isDeleted`, `parentTaskId`, `recurrenceInstance`（降順）
  - その他、必要に応じてFirebase Consoleで作成

---

## 18. Cloud Functions

### 18.1 `checkReminders`
- リマインダーの定期チェック
- 設定された時間に通知を送信
- 通知設定を確認して送信

### 18.2 `onNotificationCreated`
- 通知作成時のWebPush通知送信
- FCMトークンを使用してプッシュ通知を送信

---

## 19. セキュリティ

### 19.1 Firestoreセキュリティルール
- ユーザー認証が必要
- 各ユーザーは自分のデータのみアクセス可能
- チーム・プロジェクトメンバーは関連データにアクセス可能

### 19.2 権限チェック
- サーバーサイド（Cloud Functions）とクライアントサイドの両方で権限チェック
- 権限のない操作は拒否

---

## 20. UI/UX

### 20.1 レスポンシブデザイン
- デスクトップ対応
- タブレット対応
- モバイル対応（768px以下でサイドバーが自動的に閉じる）

### 20.2 ナビゲーション
- サイドバーナビゲーション
- ヘッダーナビゲーション
- 戻るボタン（ブラウザ履歴を使用）

### 20.3 統一されたデザイン
- 全ページで統一されたヘッダースタイル
- 統一されたボタンスタイル
- 統一されたバッジスタイル（ステータス、重要度）

---

## 21. エラーハンドリング

### 21.1 エラー表示
- ユーザーフレンドリーなエラーメッセージ
- コンソールログでの詳細なエラー情報

### 21.2 エラー回復
- ネットワークエラーの自動リトライ
- データの整合性チェック

---

## 22. パフォーマンス

### 22.1 データ取得の最適化
- 必要なデータのみを取得
- クエリの最適化
- インデックスの適切な使用

### 22.2 キャッシング
- ユーザー情報のキャッシング
- チーム情報のキャッシング

---

## 23. 今後の拡張予定

- カレンダー表示の改善
- エクスポート機能（PDF、Excel）
- より詳細な統計・レポート機能
- モバイルアプリ（PWA対応）
- オフライン対応の強化

